---
import { SITE_TITLE } from '../consts';

const { pathname } = Astro.url;
const isSpanish = pathname.st artsWith('/es/');

// 1. LOGIC FOR THE LANGUAGE  SWITCHER BUTTON
// If we are in Spanish, remove '/es' to get English path.
// If we are in English, add '/es' to get Spanish path.
let switchUrl;
if (isSpanish) {
    switchUrl = pathname.replace(/^\/es/, '') || '/';
} else {
    switchUrl = pathname === '/' ? '/es/' : `/es${pathname}`;
}
const switchLabel = isSpanish ? 'EN' : 'ES';
const switchLangAttr = isSpanish ? 'en' : 'es';

// 2. LOGIC FOR NAVIGATION LINKS (Anchors)
// This ensures that if you are on "/es/projects", clicking "About"
// takes you to "/es/#about", not the English homepage.
const homeBase = isSpanish ? '/es' : '';

// 3. MENU TRANSLATIONS
const t = {
    home: isSpanish ? 'Inicio' : 'Home',
    about: isSpanish ? 'Sobre mí' : 'About',
    sections: isSpanish ? 'Secciones' : 'Sections',
    works: isSpanish ? 'Mis trabajos' : 'My works',
    contact: isSpanish ? 'Contacto' : 'Contact'
};
---

<nav class="navbar navbar-expand-lg navbar-light fixed-top" data-spy="affix" data-offset-top="0">
    <div class="container">
        <a class="navbar-brand" href={isSpanish ? "/es/" : "/"}>
            <img src="/assets/imgs/icon_website.png" alt="Logo">
        </a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto align-items-center">
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#home`}>{t.home}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#about`}>{t.about}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#service`}>{t.sections}</a>
                </li>                   
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#portfolio`}>{t.works}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#contact`}>{t.contact}</a>
                </li>

                <li class="nav-item ml-4">
                    <a class="nav-link btn btn-secondary rounded" href={switchUrl} lang={switchLangAttr}>
                        {switchLabel}
                    </a>
                </li>

            </ul>
        </div>
    </div>          
</nav>---
import { SITE_TITLE } from '../consts';

const { pathname } = Astro.url;
const isSpanish = pathname.startsWith('/es/');

// 1. LOGIC FOR THE LANGUAGE SWITCHER BUTTON
let switchUrl;
if (isSpanish) {
    // If in Spanish, remove '/es' (and handle root case)
    switchUrl = pathname.replace(/^\/es/, '') || '/';
} else {
    // If in English, add '/es' (handle root case)
    switchUrl = pathname === '/' ? '/es/' : `/es${pathname}`;
}

const switchLabel = isSpanish ? 'EN' : 'ES';
const switchLangAttr = isSpanish ? 'en' : 'es';

// 2. LOGIC FOR NAVIGATION LINKS
// Keep users in the current language namespace when clicking anchors
const homeBase = isSpanish ? '/es' : '';

// 3. MENU TRANSLATIONS
const t = {
    home: isSpanish ? 'Inicio' : 'Home',
    about: isSpanish ? 'Sobre mí' : 'About',
    sections: isSpanish ? 'Secciones' : 'Sections',
    works: isSpanish ? 'Mis trabajos' : 'My works',
    contact: isSpanish ? 'Contacto' : 'Contact'
};
---

<nav class="navbar navbar-expand-lg navbar-light fixed-top" data-spy="affix" data-offset-top="0">
    <div class="container">
        <a class="navbar-brand" href={isSpanish ? "/es/" : "/"}>
            <img src="/assets/imgs/icon_website.png" alt="Logo" />
        </a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto align-items-center">
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#home`}>{t.home}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#about`}>{t.about}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#service`}>{t.sections}</a>
                </li>                   
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#portfolio`}>{t.works}</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href={`${homeBase}/#contact`}>{t.contact}</a>
                </li>

                <li class="nav-item ml-4">
                    <a class="nav-link btn btn-secondary rounded" href={switchUrl} lang={switchLangAttr}>
                        {switchLabel}
                    </a>
                </li>

            </ul>
        </div>
    </div>          
</nav>