---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";

// GTM ID
const GTM_ID = "GTM-WDZK7ZFX";
---

<!doctype html>
<html lang="en">
    <head>
        <BaseHead
            title="SHARE Calculator - Shared Apartment Rent Splitter | Alexis Gomel"
            description="Shared Appartment REnt Calculator"
        />

        <script is:inline>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("consent", "default", {
                ad_storage: "denied",
                ad_user_data: "denied",
                ad_personalization: "denied",
                analytics_storage: "denied",
            });
        </script>

        <link
            rel="stylesheet"
            id="silktide-consent-manager-css"
            href="/cookie-banner/silktide-consent-manager.css"
        />
        <script is:inline src="/cookie-banner/silktide-consent-manager.js"
        ></script>

        <script is:inline>
            document.addEventListener("DOMContentLoaded", function () {
                if (typeof silktideCookieBannerManager !== "undefined") {
                    silktideCookieBannerManager.updateCookieBannerConfig({
                        background: { showBackground: true },
                        cookieIcon: { position: "bottomLeft" },
                        cookieTypes: [
                            {
                                id: "necessary",
                                name: "Necessary",
                                required: true,
                            },
                            {
                                id: "analytics",
                                name: "Analytics",
                                defaultValue: true,
                                onAccept: function () {
                                    gtag("consent", "update", {
                                        analytics_storage: "granted",
                                    });
                                    dataLayer.push({
                                        event: "consent_accepted_analytics",
                                    });
                                },
                                onReject: function () {
                                    gtag("consent", "update", {
                                        analytics_storage: "denied",
                                    });
                                },
                            },
                            {
                                id: "advertising",
                                name: "Advertising",
                                onAccept: function () {
                                    gtag("consent", "update", {
                                        ad_storage: "granted",
                                        ad_user_data: "granted",
                                        ad_personalization: "granted",
                                    });
                                    dataLayer.push({
                                        event: "consent_accepted_advertising",
                                    });
                                },
                                onReject: function () {
                                    gtag("consent", "update", {
                                        ad_storage: "denied",
                                        ad_user_data: "denied",
                                        ad_personalization: "denied",
                                    });
                                },
                            },
                        ],
                    });
                }
            });
        </script>

        <script is:inline define:vars={{ GTM_ID }}>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    "gtm.start": new Date().getTime(),
                    event: "gtm.js",
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != "dataLayer" ? "&l=" + l : "";
                j.async = true;
                j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, "script", "dataLayer", GTM_ID);
        </script>

        <link
            rel="stylesheet"
            href="/assets/vendors/themify-icons/css/themify-icons.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        />
        <link rel="stylesheet" href="/assets/css/steller.css" />

        <link rel="stylesheet" href="/assets/css/sac_styles.css" />
    </head>

    <body data-spy="scroll" data-target=".navbar" data-offset="40" id="home">
        <noscript>
            <iframe
                src={`https://www.googletagmanager.com/ns.html?id=${GTM_ID}`}
                height="0"
                width="0"
                style="display:none;visibility:hidden"></iframe>
        </noscript>

        <Header />

        <div class="container mt-5 pt-5">
            <h1>SHared Appartment REnt Calculator (SHARE)</h1>
            <form id="rent-form">
                <div class="inline-inputs">
                    <div>
                        <label for="rent">Rental price:</label>
                        <input type="number" id="rent" name="rent" required />
                    </div>
                    <div>
                        <label for="total_area"
                            >Total area of the apartment:</label
                        >
                        <input
                            type="number"
                            id="total_area"
                            name="total_area"
                            required
                        />
                    </div>
                    <div id="price-per-unit-area"></div>
                </div>

                <label for="num_rooms">Number of rooms:</label>
                <input type="number" id="num_rooms" name="num_rooms" required />

                <label for="alpha"
                    >Value of shared space (between 0 and 1):
                    <div class="tooltip">
                        0 if the shared space is not taken into account of the
                        calculation.<br />
                        1 if the value per area of the shared space is considered
                        the same as the value per area of the rooms.<br />
                        Default: 0.75. The area of the shared space is considered
                        to be worth 3/4 of the value of the private rooms.
                    </div>
                </label>
                <div class="inline-inputs">
                    <input
                        type="range"
                        id="alpha"
                        name="alpha"
                        min="0"
                        max="1"
                        step="0.01"
                        value="0.75"
                        style="width: 150px;"
                    />
                    <span id="alpha-value">0.75</span>
                </div>

                <div id="room-dimensions-container"></div>

                <label for="bills">Bills per month (optional):</label>
                <input type="number" id="bills" name="bills" />

                <button type="submit">Calculate</button>
            </form>

            <div id="warning"></div>
            <div id="result"></div>
            <div class="room-visualization" id="room-visualization"></div>
        </div>

        <Footer />

        <script is:inline src="/assets/vendors/jquery/jquery-3.4.1.js"></script>
        <script is:inline src="/assets/vendors/bootstrap/bootstrap.bundle.js"
        ></script>
        <script is:inline src="/assets/vendors/bootstrap/bootstrap.affix.js"
        ></script>
        <script is:inline src="/assets/js/steller.js"></script>

        <script is:inline src="/assets/js/sac_script.js"></script>
    </body>
</html>
